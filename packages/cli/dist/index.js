import{Command as C}from"commander";import{existsSync as N,promises as n}from"fs";import o from"path";import{Command as P}from"commander";import J from"ora";import{execa as F}from"execa";import f from"prompts";var l=new P().name("farmui-add").description("Adding a new component for farmui from terminal").argument("<string>","Id of the componnt from farmui.com").option("--id","id of the component").action(async(e,a)=>{try{let s="components",{dirName:r}=await f({type:"text",name:"dirName",message:"A directory where it should be living",hint:"./components "});console.log({dirName:r}),r&&(s=r);let i=o.join(process.cwd(),s),_=o.join(process.cwd(),"/src"),w=N(i),G=!1;if(w){console.log("The component alredy existed");let{proceed:t}=await f({type:"confirm",name:"proceed",message:"Ready to install components and dependencies. Proceed?",initial:!0})}await n.mkdir(i,{recursive:!0});let h="";h=`${e}.tsx`;let u=o.join(process.cwd()+"/src","index.ts"),O=await n.readFile(u,"utf8"),y=o.join(process.cwd()+"/src","comp.json"),x=await n.readFile(y,"utf8"),c=(await JSON.parse(x)).find(t=>t.id===e),j=c.comp_path,k=c.depends_on,m=[j,...k],I=J("Installing components...").start();console.log({write_together:m}),m.map(async t=>{let v=o.join(_,"commands"),d=o.join(v,t);console.log({file_path_read:d});let S=await n.readFile(d,"utf8"),b=o.join(i,t);await n.writeFile(b,S)});let p=c.dependencies;p?.length&&await F("pnpm",["install",...p],{cwd:process.cwd()}),I.succeed("Successfully installed")}catch(s){console.log("Error: ",s)}});import T from"path";import A from"fs-extra";function g(){let e=T.join("package.json");return A.readJSONSync(e)}process.on("SIGINT",()=>process.exit(0));process.on("SIGTERM",()=>process.exit(0));async function E(){let e=await g(),a=new C().name("farmui").description("Add natively farmed farmUI blocks ").version(e.version||"1.0.0","-v, --version","display the version number");a.addCommand(l),a.parse()}E();
//# sourceMappingURL=index.js.map